<!DOCTYPE html>
<html lang="zh-CN">

<head>

  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" onerror="handleCdnError('Socket.IO')"></script>
  <meta charset="UTF-8">
  <title>è·‘æ­¥åŠ©æ‰‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- æ³¨æ„: Tailwind CDN ä»…ç”¨äºå¼€å‘/æ¼”ç¤ºã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®å®‰è£…ä¸º PostCSS æ’ä»¶ -->
  <script src="https://cdn.tailwindcss.com" onerror="handleCdnError()"></script>

  <!-- Google Fonts æ ‡å‡†å¼•å…¥ï¼ˆæ›¿ä»£æ‰‹å†™ @font-faceï¼‰ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Zilla+Slab:wght@600;700&family=Noto+Sans+SC:wght@400;600;700&display=swap"
    rel="stylesheet" onerror="handleCdnError()">

  <script src="https://webapi.amap.com/loader.js" onerror="handleCdnError()"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
  <script>
    // é…ç½®TailwindCSS
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { 'sans': ['Noto Sans SC', 'system-ui', 'sans-serif'], 'display': ['Zilla Slab', 'serif'] },
          colors: { 'base': '#7dd3fc' }
        }
      }
    }
  </script>
  <style>
    /* CSSå˜é‡å®šä¹‰ */



    /* é»˜è®¤ä¸»é¢˜ï¼ˆæ— éœ€é¢å¤– classï¼‰ */
    body {
      background: linear-gradient(180deg, rgba(245, 250, 255, 1) 0%, rgba(235, 245, 255, 1) 40%, rgba(250, 240, 255, 1) 100%);
      background-attachment: fixed;
    }

    .panel {
      backdrop-filter: blur(16px);
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.45);
      box-shadow: 0 10px 24px rgba(16, 24, 40, 0.12);
    }

    /* äºŒæ¬¡å…ƒä¸»é¢˜ */
    body.theme-anime {
      /* æ·»åŠ ä¸€å¼ èƒŒæ™¯å›¾ï¼Œæ‚¨å¯ä»¥æ›¿æ¢ä¸ºæ‚¨å–œæ¬¢çš„å›¾ç‰‡URL */
      background-image: url('https://api.paugram.com/wallpaper');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    body.theme-anime .panel {
      /* é¢æ¿ä½¿ç”¨æ›´å¼ºçƒˆçš„æ¯›ç»ç’ƒæ•ˆæœ */
      background-color: rgba(255, 255, 255, 0.65);
      /* é™ä½ä¸é€æ˜åº¦ */
      backdrop-filter: blur(20px) saturate(150%);
      /* å¢å¼ºæ¨¡ç³Šå’Œé¥±å’Œåº¦ */
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
    }

    /* ç®€çº¦ä¸»é¢˜ */
    body.theme-minimalist {
      background: #f8f9fa;
      /* ä½¿ç”¨çº¯è‰²èƒŒæ™¯ */
    }

    body.theme-minimalist .panel {
      background-color: #ffffff;
      backdrop-filter: none;
      /* ç§»é™¤æ¯›ç»ç’ƒæ•ˆæœ */
      border: 1px solid #e9ecef;
      /* ä½¿ç”¨æ›´æŸ”å’Œçš„è¾¹æ¡† */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      /* ä½¿ç”¨æ›´ç»†å¾®çš„é˜´å½± */
      border-radius: 12px;
      /* ç¨å¾®å‡å°åœ†è§’ */
    }

    /* ä¸‹æ‹‰é€‰æ‹©æ¡†æ–‡æœ¬ä¸æ¢è¡Œï¼Œé¿å…å¤šè¡ŒæŒ¤å‹å¯¼è‡´â€œçœ‹èµ·æ¥ä¸é½å…¨â€ */
    #multi-config-user-select {
      white-space: nowrap;
      /* æ–‡æœ¬ä¸æŠ˜è¡Œ */
      overflow-x: auto;
      /* è¾…åŠ©ï¼šå…è®¸æ°´å¹³æ»šåŠ¨ï¼ˆæ³¨æ„ï¼šéƒ¨åˆ†æµè§ˆå™¨ä¸ä¸º select æ˜¾ç¤º H-scrollï¼‰ */
      max-width: 100%;
      /* çº¦æŸä¸ºå®¹å™¨å®½åº¦ï¼Œé¿å…æ’‘ç ´å¸ƒå±€ */
    }


    /* ä»…é’ˆå¯¹ select å…ƒç´ å‡å°ç»Ÿä¸€è¡¨å•å†…è¾¹è·ï¼Œæ‰©å¤§å¯è§†ç©ºé—´ */
    select.select-field {
      padding: 0.45rem 0.6rem;
      /* åŸæ¥ .select-field çš„ padding æ¯”è¾ƒåšï¼Œé€‚å½“å‡å° */
    }

    /* ç»™ options æç¤ºå®Œæ•´æ–‡æœ¬ï¼ˆä¸åŒæµè§ˆå™¨å¯¹ option çš„æ ·å¼æ”¯æŒæœ‰é™ï¼Œtooltip æ›´ç¨³å¦¥ï¼‰ */
    #multi-config-user-select option {
      /* å¤§å¤šæ•°æµè§ˆå™¨ä¸æ”¯æŒ option çš„ ellipsisï¼Œä½†å¯ä¿ç•™ä»¥å°½å¯èƒ½å…¼å®¹ */
      text-overflow: ellipsis;
      overflow: hidden;
    }

    /* æ¨¡æ€æ¡†èƒŒæ™¯ */

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      pointer-events: auto;
      /* å…è®¸èƒŒæ™¯é®ç½©å±‚äº¤äº’ï¼Œé˜»æŒ¡ä¸‹æ–¹ç‚¹å‡» */
      background-color: rgba(0, 0, 0, 0.4);
      /* æ·»åŠ åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
      /* display å°†ç”± JS æ§åˆ¶ä¸º 'flex' ä»¥å®ç°å±…ä¸­ */
      align-items: center;
      justify-content: center;
    }


    /* å†…å®¹å®¹å™¨ï¼šå±…ä¸­æ˜¾ç¤º */
    .modal-content {
      background: linear-gradient(135deg, #ffffff, #f7f9ff);
      /* margin: 10% auto;  <-- ç§»é™¤æ­¤è¡Œä»¥å…è®¸ Flexbox å‚ç›´å±…ä¸­ */
      padding: 24px 28px;
      border-radius: 16px;
      width: 360px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25),
        0 0 12px rgba(120, 160, 255, 0.4);
      animation: fadeIn 0.35s ease, scaleIn 0.35s ease;
      font-family: "Segoe UI", "Microsoft YaHei", sans-serif;
      position: relative;
      pointer-events: auto;
      /* å†…å®¹å¯äº¤äº’ */
    }

    /* æ ‡é¢˜ */
    .modal-content h3 {
      margin-top: 0;
      text-align: center;
      font-size: 20px;
      color: #3a4a7a;
      letter-spacing: 1px;
    }

    /* å…³é—­æŒ‰é’® */
    .close {
      position: absolute;
      right: 14px;
      top: 10px;
      font-size: 22px;
      cursor: pointer;
      color: #888;
      transition: color 0.2s;
    }

    .close:hover {
      color: #ff5c8a;
    }

    /* è¡¨å• */
    .form-group {
      margin: 14px 0;
    }

    .form-group label {
      display: inline-block;
      width: 70px;
      font-weight: bold;
      color: #4a4a6a;
    }

    .form-group input {
      width: 230px;
      padding: 8px 10px;
      border: 1px solid #ccd2f0;
      border-radius: 8px;
      outline: none;
      transition: all 0.25s;
      background: #fff;
    }

    .form-group input:focus {
      border-color: #7a9dff;
      box-shadow: 0 0 6px rgba(122, 157, 255, 0.6);
    }

    /* åº•éƒ¨æŒ‰é’® */
    .modal-actions {
      text-align: right;
      margin-top: 18px;
    }

    .modal-actions button {
      margin-left: 10px;
      padding: 8px 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.25s;
    }

    #newUserCancel {
      background: #e0e4f7;
      color: #444;
    }

    #newUserCancel:hover {
      background: #d0d6f0;
    }

    #newUserConfirm {
      background: linear-gradient(135deg, #7a9dff, #5c7cff);
      color: #fff;
      box-shadow: 0 3px 8px rgba(92, 124, 255, 0.4);
    }

    #newUserConfirm:hover {
      background: linear-gradient(135deg, #5c7cff, #4a68e0);
      box-shadow: 0 4px 10px rgba(92, 124, 255, 0.55);
    }

    /* åŠ¨ç”» */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.9);
      }

      to {
        transform: scale(1);
      }
    }



    :root {
      --base-color: #7dd3fc;
      --base-color-600: #0891b2;
      --base-color-500: #22d3ee;
      --base-color-300: #a5f3fc;
      --card-bg: rgba(255, 255, 255, 0.85);
      --glass: rgba(255, 255, 255, 0.65);
      --ink: #0f172a;
    }

    html,
    body {
      height: 100%;
    }

    body {
      background: linear-gradient(180deg, rgba(245, 250, 255, 1) 0%, rgba(235, 245, 255, 1) 40%, rgba(250, 240, 255, 1) 100%);
      background-attachment: fixed;
    }

    .bg-anime {
      background-image: url('');
      background-size: cover;
      background-position: center;
    }

    .panel {
      backdrop-filter: blur(16px);
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.45);
      box-shadow: 0 10px 24px rgba(16, 24, 40, 0.12);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      padding: .65rem 1rem;
      border-radius: 999px;
      font-weight: 700;
      transition: all .25s ease;
      box-shadow: 0 6px 16px rgba(2, 132, 199, .15);
    }

    .btn:hover {
      /* transform: translateY(-1px); */
      /* æŒ‰é’®æ²¡äº‹ä¸è¦çç§»åŠ¨ */
      transform: none;
      box-shadow: 0 12px 28px rgba(2, 132, 199, .22);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-primary {
      color: #fff;
      background: linear-gradient(135deg, var(--base-color), var(--base-color-600));
    }

    .btn-secondary {
      color: #fff;
      background: linear-gradient(135deg, #a855f7, #7c3aed);
    }

    .btn-danger {
      color: #fff;
      background: linear-gradient(135deg, #ef4444, #b91c1c);
    }

    .btn-warning {
      color: #fff;
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }

    .btn-success {
      color: #fff;
      background: linear-gradient(135deg, #10b981, #059669);
    }

    .btn-ghost {
      color: #334155;
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .input-field,
    .select-field {
      width: 100%;
      border-radius: 14px;
      padding: .7rem .9rem;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6), 0 8px 14px rgba(16, 24, 40, 0.06);
      color: #0f172a;
      transition: box-shadow .2s ease, border-color .2s ease;
    }

    .input-field:focus,
    .select-field:focus {
      outline: none;
      border-color: var(--base-color-600);
      box-shadow: 0 0 0 3px rgba(34, 211, 238, .25);
    }

    .badge {
      display: inline-block;
      padding: .25rem .6rem;
      border-radius: 999px;
      font-weight: 700;
      background: rgba(34, 211, 238, .18);
      color: var(--base-color-600);
    }

    .card-title {
      font-family: 'Zilla Slab', serif;
      letter-spacing: .5px;
    }

    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(226, 232, 240, 0.6);
    }

    ::-webkit-scrollbar-thumb {
      background-color: rgba(148, 163, 184, 0.8);
      border-radius: 6px;
      border: 2px solid rgba(226, 232, 240, 0.6);
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: rgba(100, 116, 139, 0.9);
    }

    .tab-button {
      padding: .5rem .75rem;
      font-weight: 700;
      color: #64748b;
      border-bottom: 3px solid transparent;
      transition: all .2s ease;
    }

    .tab-button.active {
      color: var(--base-color-600);
      border-bottom-color: var(--base-color-600);
    }

    #task-list>div.selected {
      background: rgba(34, 211, 238, .14);
      border-left: 4px solid var(--base-color-600);
    }

    #map-container.drawing .amap-marker,
    #map-container.drawing .amap-text,
    #map-container.drawing .amap-overlay-text,
    #map-container.drawing .amap-overlay {
      pointer-events: none !important;
    }

    .pulsing-marker {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(0.98);
        box-shadow: 0 0 0 0 rgba(2, 132, 199, 0.7);
      }

      70% {
        transform: scale(1);
        box-shadow: 0 0 0 12px rgba(2, 132, 199, 0);
      }

      100% {
        transform: scale(0.98);
        box-shadow: 0 0 0 0 rgba(2, 132, 199, 0);
      }
    }

    .hero-overlay {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.85) 60%);
    }

    .theme-dot {
      width: 20px;
      height: 20px;
      border-radius: 100%;
      border: 2px solid #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, .15);
      cursor: pointer;
      transition: transform .2s ease;
    }

    .theme-dot:hover {
      transform: scale(1.05);
    }

    /* æ¨¡æ€æ¡†æ˜¾ç¤ºæ—¶ï¼Œéšè—åœ°å›¾logoå’Œç‰ˆæƒ */
    #amap-key-modal:not(.hidden)~#map-container .amap-logo,
    #amap-key-modal:not(.hidden)~#map-container .amap-copyright,
    #amap-key-modal:not(.hidden)~main>#multi-map-container .amap-logo,
    #amap-key-modal:not(.hidden)~main>#multi-map-container .amap-copyright,

    #user-details-modal:not(.hidden)~#map-container .amap-logo,
    #user-details-modal:not(.hidden)~#map-container .amap-copyright,
    #task-details-modal:not(.hidden)~#map-container .amap-logo,
    #task-details-modal:not(.hidden)~#map-container .amap-copyright,
    #user-details-modal:not(.hidden)~main>#multi-map-container .amap-logo,
    #user-details-modal:not(.hidden)~main>#multi-map-container .amap-copyright,
    #task-details-modal:not(.hidden)~main>#multi-map-container .amap-logo,
    #task-details-modal:not(.hidden)~main>#multi-map-container .amap-copyright,
    #account-params-modal:not(.hidden)~main>#multi-map-container .amap-logo,
    #account-params-modal:not(.hidden)~main>#multi-map-container .amap-copyright {
      display: none !important;
    }

    /* å½“ä»»æ„æ¨¡æ€æ‰“å¼€æ—¶ï¼Œéšè—åœ°å›¾çš„ logo ä¸ç‰ˆæƒ */
    body.modal-visible .amap-logo,
    body.modal-visible .amap-copyright {
      display: none !important;
    }

    #admin-modal-close-btn:hover {
      transform: translateY(-50%);
      /* å¼ºåˆ¶ hover æ—¶åªåº”ç”¨å‚ç›´å±…ä¸­ transform */
    }

    /* --- Bug Fix: é˜²æ­¢ SweetAlert2 å¼¹çª—å¯¼è‡´é¡µé¢ä½ç§» --- */
    body.swal2-shown:not(.swal2-toast-shown) {
      overflow: hidden !important;
      /* å¼ºåˆ¶ä¿æŒ overflow: hidden */
      padding-right: 0 !important;
      /* å¼ºåˆ¶ç§»é™¤ SweetAlert å¯èƒ½æ·»åŠ çš„ padding */
    }
  </style>

</head>

<body class="text-slate-800 font-sans h-screen overflow-hidden antialiased">

  <div id="cdn-error-overlay"
    class="fixed inset-0 z-9999 hidden flex-col items-center justify-center bg-[#f8fafc] p-8 text-center text-[#475569]"
    style="font-family: sans-serif;">
    <div style="max-width: 500px;">
      <h1 style="font-size: 1.875rem; font-weight: bold; color: #be123c; margin-bottom: 1rem;">ç•Œé¢èµ„æºåŠ è½½å¤±è´¥</h1>
      <p style="font-size: 1.125rem; margin-bottom: 1.5rem;">åº”ç”¨ç¨‹åºæ— æ³•è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œæœåŠ¡å™¨ï¼ˆCDNï¼‰æ¥ä¸‹è½½å¿…è¦çš„ç•Œé¢æ–‡ä»¶ï¼ˆå¦‚æ ·å¼å’Œåœ°å›¾åº“ï¼‰ã€‚</p>
      <div
        style="background-color: #f1f5f9; border-radius: 0.5rem; padding: 1rem; text-align: left; font-size: 0.875rem; line-height: 1.5;">
        <h2 style="font-weight: 600; color: #1e293b; margin-top: 0; margin-bottom: 0.75rem;">å¯èƒ½çš„åŸå› åŠè§£å†³æ–¹æ³•ï¼š</h2>
        <ul style="list-style-type: disc; padding-left: 1.25rem; margin: 0;">
          <li style="margin-bottom: 0.5rem;"><strong>æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥</strong>ï¼šè¯·ç¡®ä¿æ‚¨çš„è®¾å¤‡å·²è¿æ¥åˆ°äº’è”ç½‘ã€‚</li>
          <li style="margin-bottom: 0.5rem;"><strong>æ£€æŸ¥é˜²ç«å¢™æˆ–ä»£ç†</strong>ï¼šç³»ç»Ÿé˜²ç«å¢™ã€æ€æ¯’è½¯ä»¶æˆ–ç½‘ç»œä»£ç†å¯èƒ½é˜»æ­¢äº†ç¨‹åºè®¿é—®ç½‘ç»œã€‚</li>
          <li><strong>ç½‘ç»œç¯å¢ƒé—®é¢˜</strong>ï¼šæ‚¨å½“å‰çš„ç½‘ç»œç¯å¢ƒå¯èƒ½æ— æ³•ç¨³å®šè®¿é—®æ‰€éœ€çš„å¤–éƒ¨èµ„æºã€‚</li>
        </ul>
      </div>
      <p style="margin-top: 1.5rem; font-size: 0.875rem; color: #64748b;">è¯·æ£€æŸ¥ç½‘ç»œåï¼Œå®Œå…¨å…³é—­å¹¶é‡å¯æœ¬ç¨‹åºã€‚å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œæ‚¨å¯èƒ½éœ€è¦æ›´æ¢ç½‘ç»œç¯å¢ƒã€‚</p>
    </div>
  </div>

  <!-- æ–°ç”¨æˆ·æ·»åŠ æ¨¡æ€æ¡† -->
  <div id="newUserModal" class="modal">
    <div class="modal-content">
      <span class="close" id="newUserClose">&times;</span>
      <h3>æ·»åŠ æ–°ç”¨æˆ·</h3>
      <div class="form-group">
        <label for="newUsername">è´¦å·ï¼š</label>
        <input type="text" id="newUsername" placeholder="è¯·è¾“å…¥è´¦å·">
      </div>
      <div class="form-group">
        <label for="newPassword">å¯†ç ï¼š</label>
        <input type="password" id="newPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
      </div>
      <div class="modal-actions">
        <button id="newUserCancel">å–æ¶ˆ</button>
        <button id="newUserConfirm">ç¡®è®¤</button>
      </div>
    </div>
  </div>


  <!-- åŠ è½½é®ç½©å±‚ -->
  <div id="loading-overlay" class="absolute inset-0 z-50 flex flex-col items-center justify-center gap-6 bg-white/80">
    <div class="loader"></div>
    <p class="text-base font-bold text-sky-600">æ­£åœ¨åŠ è½½èµ„æºä¸­...</p>
  </div>

  <!-- ç”¨æˆ·è®¤è¯ç™»å½•ç•Œé¢ -->
    <!-- ========================================
     åŠ¨æ€åŠ è½½åŒºåŸŸ: auth-login-container
     åŸå§‹å¤§å°: 4.8 KB
     é€šè¿‡ API åŠ¨æ€åŠ è½½ä»¥å‡å°åˆå§‹é¡µé¢å¤§å°
     ======================================== -->
  <div id="auth-login-container-placeholder" data-fragment="auth-login-container">
    <!-- æ­¤åŒºåŸŸå°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
    <div class="loading-indicator" style="display: none; text-align: center; padding: 20px;">
      <p>æ­£åœ¨åŠ è½½ auth-login-container...</p>
    </div>
  </div>
  <script>
    // åŠ¨æ€åŠ è½½ HTML ç‰‡æ®µ: auth-login-container
    (function() {
      const placeholder = document.getElementById('auth-login-container-placeholder');
      const fragmentName = 'auth-login-container';
      
      // æ˜¾ç¤ºåŠ è½½æç¤º
      const loadingIndicator = placeholder.querySelector('.loading-indicator');
      if (loadingIndicator) loadingIndicator.style.display = 'block';
      
      // ä» API åŠ è½½ HTML ç‰‡æ®µ
      fetch(`/html/${fragmentName}.html`)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(html => {
          // å°†åŠ è½½çš„ HTML æ’å…¥åˆ°å ä½ç¬¦ä¸­
          placeholder.outerHTML = html;
          console.log(`[HTMLåŠ è½½] æˆåŠŸåŠ è½½ç‰‡æ®µ: ${fragmentName}`);
        })
        .catch(error => {
          console.error(`[HTMLåŠ è½½] åŠ è½½ç‰‡æ®µå¤±è´¥: ${fragmentName}`, error);
          if (loadingIndicator) {
            loadingIndicator.innerHTML = '<p style="color: red;">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
          }
        });
    })();
  </script>

  <!-- ç™»å½•ç•Œé¢ -->
    <!-- ========================================
     åŠ¨æ€åŠ è½½åŒºåŸŸ: login-container
     åŸå§‹å¤§å°: 4.4 KB
     é€šè¿‡ API åŠ¨æ€åŠ è½½ä»¥å‡å°åˆå§‹é¡µé¢å¤§å°
     ======================================== -->
  <div id="login-container-placeholder" data-fragment="login-container">
    <!-- æ­¤åŒºåŸŸå°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
    <div class="loading-indicator" style="display: none; text-align: center; padding: 20px;">
      <p>æ­£åœ¨åŠ è½½ login-container...</p>
    </div>
  </div>
  <script>
    // åŠ¨æ€åŠ è½½ HTML ç‰‡æ®µ: login-container
    (function() {
      const placeholder = document.getElementById('login-container-placeholder');
      const fragmentName = 'login-container';
      
      // æ˜¾ç¤ºåŠ è½½æç¤º
      const loadingIndicator = placeholder.querySelector('.loading-indicator');
      if (loadingIndicator) loadingIndicator.style.display = 'block';
      
      // ä» API åŠ è½½ HTML ç‰‡æ®µ
      fetch(`/html/${fragmentName}.html`)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(html => {
          // å°†åŠ è½½çš„ HTML æ’å…¥åˆ°å ä½ç¬¦ä¸­
          placeholder.outerHTML = html;
          console.log(`[HTMLåŠ è½½] æˆåŠŸåŠ è½½ç‰‡æ®µ: ${fragmentName}`);
        })
        .catch(error => {
          console.error(`[HTMLåŠ è½½] åŠ è½½ç‰‡æ®µå¤±è´¥: ${fragmentName}`, error);
          if (loadingIndicator) {
            loadingIndicator.innerHTML = '<p style="color: red;">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
          }
        });
    })();
  </script>

  <!-- ä¸»åº”ç”¨ç•Œé¢ -->
    <!-- ========================================
     åŠ¨æ€åŠ è½½åŒºåŸŸ: main-app
     åŸå§‹å¤§å°: 10.0 KB
     é€šè¿‡ API åŠ¨æ€åŠ è½½ä»¥å‡å°åˆå§‹é¡µé¢å¤§å°
     ======================================== -->
  <div id="main-app-placeholder" data-fragment="main-app">
    <!-- æ­¤åŒºåŸŸå°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
    <div class="loading-indicator" style="display: none; text-align: center; padding: 20px;">
      <p>æ­£åœ¨åŠ è½½ main-app...</p>
    </div>
  </div>
  <script>
    // åŠ¨æ€åŠ è½½ HTML ç‰‡æ®µ: main-app
    (function() {
      const placeholder = document.getElementById('main-app-placeholder');
      const fragmentName = 'main-app';
      
      // æ˜¾ç¤ºåŠ è½½æç¤º
      const loadingIndicator = placeholder.querySelector('.loading-indicator');
      if (loadingIndicator) loadingIndicator.style.display = 'block';
      
      // ä» API åŠ è½½ HTML ç‰‡æ®µ
      fetch(`/html/${fragmentName}.html`)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(html => {
          // å°†åŠ è½½çš„ HTML æ’å…¥åˆ°å ä½ç¬¦ä¸­
          placeholder.outerHTML = html;
          console.log(`[HTMLåŠ è½½] æˆåŠŸåŠ è½½ç‰‡æ®µ: ${fragmentName}`);
        })
        .catch(error => {
          console.error(`[HTMLåŠ è½½] åŠ è½½ç‰‡æ®µå¤±è´¥: ${fragmentName}`, error);
          if (loadingIndicator) {
            loadingIndicator.innerHTML = '<p style="color: red;">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
          }
        });
    })();
  </script>

    <!-- ========================================
     åŠ¨æ€åŠ è½½åŒºåŸŸ: multi-account-app
     åŸå§‹å¤§å°: 6.1 KB
     é€šè¿‡ API åŠ¨æ€åŠ è½½ä»¥å‡å°åˆå§‹é¡µé¢å¤§å°
     ======================================== -->
  <div id="multi-account-app-placeholder" data-fragment="multi-account-app">
    <!-- æ­¤åŒºåŸŸå°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
    <div class="loading-indicator" style="display: none; text-align: center; padding: 20px;">
      <p>æ­£åœ¨åŠ è½½ multi-account-app...</p>
    </div>
  </div>
  <script>
    // åŠ¨æ€åŠ è½½ HTML ç‰‡æ®µ: multi-account-app
    (function() {
      const placeholder = document.getElementById('multi-account-app-placeholder');
      const fragmentName = 'multi-account-app';
      
      // æ˜¾ç¤ºåŠ è½½æç¤º
      const loadingIndicator = placeholder.querySelector('.loading-indicator');
      if (loadingIndicator) loadingIndicator.style.display = 'block';
      
      // ä» API åŠ è½½ HTML ç‰‡æ®µ
      fetch(`/html/${fragmentName}.html`)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(html => {
          // å°†åŠ è½½çš„ HTML æ’å…¥åˆ°å ä½ç¬¦ä¸­
          placeholder.outerHTML = html;
          console.log(`[HTMLåŠ è½½] æˆåŠŸåŠ è½½ç‰‡æ®µ: ${fragmentName}`);
        })
        .catch(error => {
          console.error(`[HTMLåŠ è½½] åŠ è½½ç‰‡æ®µå¤±è´¥: ${fragmentName}`, error);
          if (loadingIndicator) {
            loadingIndicator.innerHTML = '<p style="color: red;">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
          }
        });
    })();
  </script>

  <!-- æ¨¡æ€å¯¹è¯æ¡† -->
  <div id="amap-key-modal" class="fixed inset-0 flex items-center justify-center hidden z-50">
    <div class="absolute inset-0 bg-black/60"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-6 relative">
      <h3 class="text-xl font-bold text-red-600 text-center">ç¼ºå°‘åœ°å›¾API Key</h3>
      <p class="text-sm text-slate-600 text-center">
        ç¨‹åºéœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„é«˜å¾·åœ°å›¾JS API Keyæ‰èƒ½ä½¿ç”¨åœ°å›¾åŠŸèƒ½ã€‚è¯·å‰å¾€
        <a href="https://console.amap.com/dev/key/app" target="_blank" class="text-sky-600 hover:underline">é«˜å¾·å¼€æ”¾å¹³å°</a>
        ç”³è¯·ä¸€ä¸ªKeyï¼ˆç±»å‹é€‰æ‹©â€œWebç«¯(JS API)â€ï¼‰ï¼Œç„¶åç²˜è´´åˆ°ä¸‹æ–¹ã€‚
      </p>
      <div class="space-y-2">
        <label class="w-full text-slate-700 font-semibold">API Key:</label>
        <input id="amap-key-input" type="text" class="input-field w-full" placeholder="è¯·åœ¨æ­¤å¤„ç²˜è´´ä½ çš„API Key">
      </div>
      <div class="flex justify-end gap-3 pt-4">
        <button id="confirm-amap-key-btn" class="btn btn-primary">ç¡®è®¤å¹¶ä¿å­˜</button>
      </div>
    </div>
  </div>







  <div id="auto-gen-modal" class="fixed inset-0 flex items-center justify-center hidden z-50">
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-6 relative">
      <h3 class="text-xl font-bold text-sky-600 text-center">è‡ªåŠ¨ç”Ÿæˆè·¯çº¿é…ç½®</h3>
      <div class="space-y-4">
        <div class="flex items-center">
          <label class="w-32 text-slate-700 font-semibold">æœ€çŸ­æ—¶é—´(åˆ†é’Ÿ)</label>
          <input id="min-time-input" type="number" value="20" class="input-field w-full">
        </div>
        <div class="flex items-center">
          <label class="w-32 text-slate-700 font-semibold">æœ€é•¿æ—¶é—´(åˆ†é’Ÿ)</label>
          <input id="max-time-input" type="number" value="30" class="input-field w-full">
        </div>
        <div class="flex items-center">
          <label class="w-32 text-slate-700 font-semibold">æœ€çŸ­è·ç¦»(ç±³)</label>
          <input id="min-dist-input" type="number" value="2000" class="input-field w-full">
        </div>
      </div>
      <div class="flex justify-end gap-3 pt-4">
        <button id="cancel-gen-button" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button id="confirm-gen-button" class="btn btn-primary">ç”Ÿæˆ</button>
      </div>
    </div>
  </div>
  <div id="user-details-modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" onclick="toggleUserDetails(false)"></div>
    <div class="panel rounded-2xl p-6 w-[32rem] space-y-4 relative">
      <div class="flex items-center justify-center gap-2">
        <h3 class="text-xl font-bold text-sky-600 text-center">ç”¨æˆ·è¯¦æƒ…</h3>
      </div>
      <div id="user-details-content" class="text-sm space-y-1 max-h-[70vh] overflow-y-auto"></div>
      <div class="flex justify-end pt-2"><button class="btn btn-ghost border border-slate-300"
          onclick="toggleUserDetails(false)">å…³é—­</button></div>
    </div>
  </div>
  <div id="task-details-modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" onclick="toggleTaskDetails(false)"></div>
    <div class="panel rounded-2xl p-6 w-[36rem] space-y-4 relative">
      <div class="flex items-center justify-center gap-2">
        <h3 class="text-xl font-bold text-sky-600 text-center">ä»»åŠ¡è¯¦æƒ…</h3>
      </div>
      <div id="task-details-content" class="text-sm space-y-1 max-h-[70vh] overflow-y-auto"></div>
      <div class="flex justify-end pt-2"><button class="btn btn-ghost border border-slate-300"
          onclick="toggleTaskDetails(false)">å…³é—­</button></div>
    </div>
  </div>
  <div id="account-params-modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" onclick="
    const modalElem = this.parentElement;
    modalElem.classList.add('hidden'); 
    modalElem.classList.remove('flex'); 
    document.body.classList.remove('modal-visible');
  "></div>
    <div class="panel rounded-2xl p-6 w-[32rem] space-y-4 relative">
      <h3 id="account-params-title" class="text-xl font-bold text-sky-600 text-center">è´¦å·å‚æ•°è®¾ç½®</h3>
      <div id="account-params-container" class="text-sm space-y-2 max-h-[60vh] overflow-y-auto pr-2"></div>
      <div class="flex justify-end pt-2 gap-3">
        <button class="btn btn-ghost border border-slate-300" onclick="
        const m = this.closest('#account-params-modal');
        m.classList.add('hidden'); 
        m.classList.remove('flex'); 
        document.body.classList.remove('modal-visible');
      ">å…³é—­</button>

        <button id="save-account-params-btn" class="btn btn-primary">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <div id="notifications-modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/40" onclick="toggleNotifications(false)"></div>
    <div class="panel rounded-2xl p-6 w-[36rem] space-y-4 relative">
      <h3 class="text-xl font-bold text-sky-600 text-center">é€šçŸ¥ä¸­å¿ƒ</h3>
      <div id="notifications-content" class="text-sm space-y-2 max-h-[70vh] overflow-y-auto pr-2">
        <p class="text-slate-400 text-center py-10">æ­£åœ¨åŠ è½½...</p>
      </div>
      <div class="flex justify-between items-center pt-2">
        <div class="flex gap-2"> <button id="refresh-notifications-btn"
            class="btn btn-ghost !py-1 !px-3 text-sky-600">åˆ·æ–°</button>
          <button id="mark-all-read-btn" class="btn btn-secondary !py-1 !px-3">ä¸€é”®å·²è¯»</button>
        </div>
        <button class="btn btn-ghost border border-slate-300" onclick="toggleNotifications(false)">å…³é—­</button>
      </div>
    </div>
  </div>


  <div id="alert-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1055]">
    <div class="absolute inset-0 bg-black/60" onclick="closeModalAlert()"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-6 relative">
      <h3 id="alert-modal-title" class="text-xl font-bold text-red-600 text-center">æ“ä½œå¤±è´¥</h3>
      <p id="alert-modal-message" class="text-sm text-slate-600 text-center py-4">
        è¿™æ˜¯ä¸€ä¸ªé”™è¯¯æç¤ºã€‚
      </p>
      <div class="flex justify-center gap-3 pt-4">
        <button id="alert-modal-close-btn" class="btn btn-primary">å…³é—­</button>
      </div>
    </div>
  </div>

    <!-- ========================================
     åŠ¨æ€åŠ è½½åŒºåŸŸ: admin-panel-modal
     åŸå§‹å¤§å°: 13.5 KB
     é€šè¿‡ API åŠ¨æ€åŠ è½½ä»¥å‡å°åˆå§‹é¡µé¢å¤§å°
     ======================================== -->
  <div id="admin-panel-modal-placeholder" data-fragment="admin-panel-modal">
    <!-- æ­¤åŒºåŸŸå°†é€šè¿‡ JavaScript åŠ¨æ€åŠ è½½ -->
    <div class="loading-indicator" style="display: none; text-align: center; padding: 20px;">
      <p>æ­£åœ¨åŠ è½½ admin-panel-modal...</p>
    </div>
  </div>
  <script>
    // åŠ¨æ€åŠ è½½ HTML ç‰‡æ®µ: admin-panel-modal
    (function() {
      const placeholder = document.getElementById('admin-panel-modal-placeholder');
      const fragmentName = 'admin-panel-modal';
      
      // æ˜¾ç¤ºåŠ è½½æç¤º
      const loadingIndicator = placeholder.querySelector('.loading-indicator');
      if (loadingIndicator) loadingIndicator.style.display = 'block';
      
      // ä» API åŠ è½½ HTML ç‰‡æ®µ
      fetch(`/html/${fragmentName}.html`)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(html => {
          // å°†åŠ è½½çš„ HTML æ’å…¥åˆ°å ä½ç¬¦ä¸­
          placeholder.outerHTML = html;
          console.log(`[HTMLåŠ è½½] æˆåŠŸåŠ è½½ç‰‡æ®µ: ${fragmentName}`);
        })
        .catch(error => {
          console.error(`[HTMLåŠ è½½] åŠ è½½ç‰‡æ®µå¤±è´¥: ${fragmentName}`, error);
          if (loadingIndicator) {
            loadingIndicator.innerHTML = '<p style="color: red;">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
          }
        });
    })();
  </script>

  <div id="confirm-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1053]">
    <div class="absolute inset-0 bg-black/60"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-6 relative">
      <h3 id="confirm-modal-title" class="text-xl font-bold text-amber-600 text-center">è¯·ç¡®è®¤</h3>
      <p id="confirm-modal-message" class="text-sm text-slate-600 text-center py-4">
        ä½ ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ
      </p>
      <div class="flex justify-end gap-3 pt-4">
        <button id="confirm-modal-cancel-btn" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button id="confirm-modal-ok-btn" class="btn btn-primary">ç¡®è®¤</button>
      </div>
    </div>
  </div>

  <!-- ä¼šè¯é€‰æ‹©æ¨¡æ€æ¡† -->
  <div id="session-picker-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1052]">
    <div class="absolute inset-0 bg-black/60"></div>
    <div class="panel rounded-2xl p-6 w-[40rem] max-h-[70vh] space-y-4 relative">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-bold text-sky-600">ä¼šè¯ç®¡ç†</h3>
        <div id="session-count-display" class="text-sm text-slate-600">
          <!-- ä¼šè¯è®¡æ•°å°†ç”±JSåŠ¨æ€å¡«å…… -->
        </div>
      </div>

      <div class="bg-sky-50 border border-sky-200 rounded-lg p-3">
        <p class="text-sm text-slate-700 mb-2">é€‰æ‹©ç°æœ‰ä¼šè¯æˆ–åˆ›å»ºæ–°ä¼šè¯</p>
        <button class="btn btn-primary w-full" onclick="createNewSessionFromPicker()">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          åˆ›å»ºæ–°ä¼šè¯
        </button>
      </div>

      <div class="space-y-2">
        <div class="flex justify-between items-center">
          <h4 class="font-semibold text-slate-700">ç°æœ‰ä¼šè¯</h4>
          <button class="btn btn-ghost !py-1 !px-2" onclick="refreshSessionPicker()">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
              </path>
            </svg>
            åˆ·æ–°
          </button>
        </div>
        <div id="session-picker-list" class="max-h-[40vh] overflow-y-auto space-y-2">
          <p class="text-slate-400 text-center py-10">åŠ è½½ä¸­...</p>
        </div>
      </div>

      <div class="border-t pt-3 text-xs text-slate-500">
        <p>ğŸ’¡ æç¤ºï¼šæ¯ä¸ªä¼šè¯éƒ½æ˜¯ç‹¬ç«‹çš„å­¦æ ¡è´¦å·ç™»å½•çŠ¶æ€ã€‚æ‚¨å¯ä»¥åˆ›å»ºå¤šä¸ªä¼šè¯æ¥ç®¡ç†ä¸åŒçš„è´¦å·ã€‚</p>
      </div>
    </div>
  </div>

  <!-- åˆ›å»ºæƒé™ç»„æ¨¡æ€æ¡† -->
  <div id="create-group-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1054]">
    <div class="absolute inset-0 bg-black/60" onclick="closeCreateGroupModal()"></div>
    <div class="panel rounded-2xl p-6 w-[50rem] max-h-[80vh] overflow-y-auto space-y-4 relative">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-sky-600">åˆ›å»ºæƒé™ç»„</h3>
        <button onclick="closeCreateGroupModal()" class="btn btn-ghost !py-1 !px-3">å…³é—­</button>
      </div>

      <div class="space-y-3">
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-1">æƒé™ç»„é”®å</label>
          <input type="text" id="new-group-key" class="input-field w-full" placeholder="ä¾‹å¦‚: custom_group">
          <p class="text-xs text-slate-500 mt-1">è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œç”¨äºå†…éƒ¨æ ‡è¯†</p>
        </div>
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-1">æƒé™ç»„åç§°</label>
          <input type="text" id="new-group-name" class="input-field w-full" placeholder="ä¾‹å¦‚: è‡ªå®šä¹‰æƒé™ç»„">
          <p class="text-xs text-slate-500 mt-1">æ˜¾ç¤ºåç§°ï¼Œç”¨äºç•Œé¢å±•ç¤º</p>
        </div>
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-2">æƒé™è®¾ç½®</label>
          <div id="create-group-permissions"
            class="grid grid-cols-2 gap-2 max-h-[40vh] overflow-y-auto border border-slate-200 rounded-lg p-3">
            <!-- æƒé™åˆ—è¡¨å°†ç”±JSåŠ¨æ€å¡«å…… -->
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="closeCreateGroupModal()" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="submitCreateGroup()" class="btn btn-primary">åˆ›å»º</button>
      </div>
    </div>
  </div>

  <!-- ç¼–è¾‘æƒé™ç»„æƒé™æ¨¡æ€æ¡† -->
  <div id="edit-group-permissions-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1054]">
    <div class="absolute inset-0 bg-black/60" onclick="closeEditGroupPermissionsModal()"></div>
    <div class="panel rounded-2xl p-6 w-[50rem] max-h-[80vh] overflow-y-auto space-y-4 relative">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-sky-600">ç¼–è¾‘æƒé™ç»„: <span id="edit-group-name"></span></h3>
        <button onclick="closeEditGroupPermissionsModal()" class="btn btn-ghost !py-1 !px-3">å…³é—­</button>
      </div>

      <div class="space-y-3">
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-2">æƒé™è®¾ç½®</label>
          <div id="edit-group-permissions-list"
            class="grid grid-cols-2 gap-2 max-h-[50vh] overflow-y-auto border border-slate-200 rounded-lg p-3">
            <!-- æƒé™åˆ—è¡¨å°†ç”±JSåŠ¨æ€å¡«å…… -->
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="closeEditGroupPermissionsModal()" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="submitEditGroupPermissions()" class="btn btn-primary">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <!-- ç®¡ç†ç”¨æˆ·æƒé™æ¨¡æ€æ¡† -->
  <div id="manage-user-permissions-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1054]">
    <div class="absolute inset-0 bg-black/60" onclick="closeManageUserPermissionsModal()"></div>
    <div class="panel rounded-2xl p-6 w-[50rem] max-h-[80vh] overflow-y-auto space-y-4 relative">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold text-sky-600">ç®¡ç†ç”¨æˆ·æƒé™: <span id="manage-user-name"></span></h3>
        <button onclick="closeManageUserPermissionsModal()" class="btn btn-ghost !py-1 !px-3">å…³é—­</button>
      </div>

      <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
        <p class="text-sm text-blue-700">
          <strong>æƒé™ç»„:</strong> <span id="user-base-group" class="font-mono"></span>
        </p>
        <p class="text-xs text-slate-600 mt-1">
          ğŸ’¡ ä»¥ä¸‹ä¸ºç”¨æˆ·ç›¸å¯¹äºæƒé™ç»„çš„å·®åˆ†åŒ–æƒé™ã€‚ç»¿è‰²è¡¨ç¤ºé¢å¤–æ·»åŠ çš„æƒé™ï¼Œçº¢è‰²è¡¨ç¤ºç§»é™¤çš„æƒé™ã€‚
        </p>
      </div>

      <div class="space-y-3">
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-2">æƒé™è°ƒæ•´</label>
          <div id="manage-user-permissions-list"
            class="grid grid-cols-2 gap-2 max-h-[50vh] overflow-y-auto border border-slate-200 rounded-lg p-3">
            <!-- æƒé™åˆ—è¡¨å°†ç”±JSåŠ¨æ€å¡«å…… -->
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="closeManageUserPermissionsModal()" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="submitManageUserPermissions()" class="btn btn-primary">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <!-- è®¾ç½®ä¼šè¯é™åˆ¶æ¨¡æ€æ¡† -->
  <div id="set-max-sessions-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1054]">
    <div class="absolute inset-0 bg-black/60" onclick="hideModal('set-max-sessions-modal')"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-4 relative">
      <h3 class="text-xl font-bold text-sky-600">è®¾ç½®ä¼šè¯é™åˆ¶</h3>

      <div class="space-y-2">
        <p class="text-sm text-slate-600">ç”¨æˆ·: <span id="sessions-username" class="font-semibold text-slate-800"></span>
        </p>
        <p class="text-sm text-slate-600">å½“å‰é™åˆ¶: <span id="sessions-current-max"
            class="font-semibold text-slate-800"></span></p>
      </div>

      <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">æ–°ä¼šè¯é™åˆ¶</label>
        <input type="number" id="new-max-sessions" min="0" class="input-field" placeholder="è¾“å…¥ä¼šè¯æ•°é‡">
        <p class="text-xs text-slate-500 mt-1">0 = æ— é™åˆ¶</p>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="hideModal('set-max-sessions-modal')" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="submitSetMaxSessions()" class="btn btn-primary">ç¡®è®¤</button>
      </div>
    </div>
  </div>

  <!-- é‡ç½®ç”¨æˆ·å¯†ç æ¨¡æ€æ¡† -->
  <div id="reset-user-password-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1054]">
    <div class="absolute inset-0 bg-black/60" onclick="hideModal('reset-user-password-modal')"></div>
    <div class="panel rounded-2xl p-6 w-96 space-y-4 relative">
      <h3 class="text-xl font-bold text-amber-600">é‡ç½®ç”¨æˆ·å¯†ç </h3>

      <div>
        <p class="text-sm text-slate-600">ç›®æ ‡ç”¨æˆ·: <span id="reset-password-username"
            class="font-semibold text-slate-800"></span></p>
      </div>

      <div class="space-y-3">
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-1">æ–°å¯†ç </label>
          <input type="password" id="reset-new-password" class="input-field" placeholder="è¾“å…¥æ–°å¯†ç ">
        </div>
        <div>
          <label class="block text-sm font-semibold text-slate-700 mb-1">ç¡®è®¤å¯†ç </label>
          <input type="password" id="reset-confirm-password" class="input-field" placeholder="å†æ¬¡è¾“å…¥æ–°å¯†ç ">
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-4 border-t">
        <button onclick="hideModal('reset-user-password-modal')"
          class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="submitResetUserPassword()" class="btn btn-primary">é‡ç½®å¯†ç </button>
      </div>
    </div>
  </div>

  <!-- å¤´åƒè£å‰ªæ¨¡æ€æ¡† -->
  <div id="avatar-crop-modal" class="fixed inset-0 flex items-center justify-center hidden z-[1055]">
    <div class="absolute inset-0 bg-black/80" onclick="closeCropModal()"></div>
    <div class="panel rounded-2xl p-6 max-w-2xl w-full mx-4 space-y-4 relative">
      <h3 class="text-xl font-bold text-sky-600">è£å‰ªå¤´åƒ</h3>

      <div class="max-h-96 overflow-hidden bg-slate-100 rounded-lg">
        <img id="crop-image" src="" alt="å¾…è£å‰ªå›¾ç‰‡" style="max-width: 100%;">
      </div>

      <div class="flex gap-2 justify-end">
        <button onclick="closeCropModal()" class="btn btn-ghost border border-slate-300">å–æ¶ˆ</button>
        <button onclick="confirmCropAndUpload()" class="btn btn-primary">ç¡®è®¤å¹¶ä¸Šä¼ </button>
      </div>
    </div>
  </div>

  <script>
    // ==============================================================================
    // åŠ¨æ€åŠ è½½ JavaScript ä»£ç 
    // ==============================================================================
    // æ­¤è„šæœ¬ä»åç«¯ API åŠ¨æ€åŠ è½½ JavaScript ä»£ç ï¼Œå®ç°ä»¥ä¸‹ä¼˜åŠ¿ï¼š
    // 1. ä»£ç ä¸ HTML åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†
    // 2. æµè§ˆå™¨å¯ä»¥ç¼“å­˜ JavaScript æ–‡ä»¶ï¼Œå‡å°‘é‡å¤åŠ è½½
    // 3. ä¿®æ”¹ JavaScript ä»£ç åæ— éœ€ä¿®æ”¹ HTML æ–‡ä»¶
    // 4. æ”¯æŒæŒ‰éœ€åŠ è½½ç‰¹å®šå‡½æ•°ï¼ˆé€šè¿‡ /JavaScript/<function>.js ç«¯ç‚¹ï¼‰
    //
    // API ç«¯ç‚¹ï¼š
    // - /JavaScript.js                --> è¿”å›å®Œæ•´çš„ JavaScript ä»£ç 
    // - /JavaScript/<function>.js     --> è¿”å›ç‰¹å®šå‡½æ•°çš„ä»£ç ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰
    //
    // ç¼“å­˜æœºåˆ¶ï¼š
    // - æµè§ˆå™¨ä¼šç¼“å­˜åŠ è½½çš„ JavaScript æ–‡ä»¶ï¼ˆ1å°æ—¶ï¼‰
    // - ä½¿ç”¨ ETag å’Œ Last-Modified æ”¯æŒæ¡ä»¶è¯·æ±‚
    // - ä¿®æ”¹ JavaScript.js åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°åŠ è½½
    // ==============================================================================

    (function() {
      // åˆ›å»º script æ ‡ç­¾åŠ¨æ€åŠ è½½ JavaScript
      const script = document.createElement('script');
      
      // è®¾ç½®è„šæœ¬æºä¸ºåç«¯ API ç«¯ç‚¹
      script.src = '/JavaScript.js';
      
      // è®¾ç½®å­—ç¬¦ç¼–ç ä¸º UTF-8ï¼ˆç¡®ä¿ä¸­æ–‡æ³¨é‡Šæ­£ç¡®æ˜¾ç¤ºï¼‰
      script.charset = 'utf-8';
      
      // å¼‚æ­¥åŠ è½½ï¼ˆä¸é˜»å¡é¡µé¢æ¸²æŸ“ï¼‰
      script.async = false;  // ä¿æŒæ‰§è¡Œé¡ºåº
      
      // åŠ è½½æˆåŠŸå›è°ƒ
      script.onload = function() {
        console.log('[JavaScriptåŠ è½½] æˆåŠŸä» API åŠ è½½ JavaScript ä»£ç ');
        // æ ‡è®°åº”ç”¨åˆå§‹åŒ–å®Œæˆï¼ˆå¦‚æœ appInitialized å˜é‡å·²å®šä¹‰ï¼‰
        if (typeof appInitialized !== 'undefined') {
          appInitialized = true;
        }
      };
      
      // åŠ è½½å¤±è´¥å›è°ƒ
      script.onerror = function() {
        console.error('[JavaScriptåŠ è½½] ä» API åŠ è½½ JavaScript å¤±è´¥');
        // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å›é€€é€»è¾‘ï¼Œä¾‹å¦‚æ˜¾ç¤ºé”™è¯¯æç¤º
        alert('JavaScript ä»£ç åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
      };
      
      // å°†è„šæœ¬æ ‡ç­¾æ·»åŠ åˆ°æ–‡æ¡£å¤´éƒ¨
      document.head.appendChild(script);
    })();
  </script>
</body>

</html>